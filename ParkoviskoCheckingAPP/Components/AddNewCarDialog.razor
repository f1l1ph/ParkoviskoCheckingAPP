@using ParkoviskoCheckingAPP.Data
@inject CarService service

<h3>Add New Car</h3>

<EditForm Model="@car" OnValidSubmit="@AddCar">
    <DataAnnotationsValidator />
    <ValidationSummary />

    <div class="form-group">
        <label for="Name">Name:</label>
        <InputText id="Name" class="form-control" @bind-Value="car.Name" />
    </div>

    <div class="form-group">
        <label for="PlateNumber">Plate Number:</label>
        <InputText id="PlateNumber" class="form-control" @bind-Value="car.PlateNumber" />
    </div>

    <div class="form-group">
        <label for="ExpirationDate">Expiration Date:</label>
        <InputDate id="ExpirationDate" class="form-control" @bind-Value="car.ExpirationDate" />
    </div>

    <div class="form-group">
        <label for="Description">Description:</label>
        <InputText id="Description" class="form-control" @bind-Value="car.Description" />
    </div>

    <button type="submit" class="btn btn-primary">Add Car</button>
</EditForm>

@code 
{
    Car car = new Car();

    private async Task AddCar()
    {
        if (car != null)
        {
            await service.AddCar(car);
            car.Name = null;
            car.PlateNumber = null;
            car.ExpirationDate = null;
            car.Description = null;
        }
    }
}
